created: 20260108034610467
description: zsh Shellä¸­çš„trapexitå‡½æ•°
modified: 20260108091723169
progress: Completed
rating: Doubtful
tags: PermanentNotes zsh
title: zsh shell TRAPEXITå‡½æ•°
type: text/vnd.tiddlywiki
visibility: Public

`TRAPEXIT`æœ¬è´¨ä¸Šæ˜¯æ›´åº•å±‚çš„â€œå…¨å±€é’©å­â€ã€‚

!!! 1ï¸âƒ£ æœ€ç®€å•çš„å®šä¹‰

```zsh
TRAPEXIT() {
  echo "shell is exiting"
}
```

è¿™æ®µä»£ç ä¼šåœ¨ä»¥ä¸‹æƒ…å†µè§¦å‘ï¼š

* `return`ï¼ˆå‡½æ•°ç»“æŸï¼‰
* `exit`
* `Ctrl+D`
* è„šæœ¬ç»“æŸ

ğŸ“Œ ''å®ƒæ˜¯â€œé€€å‡ºè¿™ä¸€å±‚ shellâ€æ—¶çš„æœ€åæœºä¼š''

!!! 2ï¸âƒ£ å¸¸è§ç”¨é€”

* åˆ é™¤ä¸´æ—¶æ–‡ä»¶
* æ¢å¤ terminal çŠ¶æ€
* åœæ­¢åå°è¿›ç¨‹
* ç¡®ä¿é”è¢«é‡Šæ”¾

!!! 3ï¸âƒ£ å¸¦é€€å‡ºç çš„ TRAPEXIT

```zsh
TRAPEXIT() {
  echo "exit code was $?"
}
```

âš ï¸ `$?` æ˜¯''å¯¼è‡´é€€å‡ºçš„é‚£æ¡å‘½ä»¤''çš„è¿”å›å€¼ã€‚

<<rememberq "20260108091617165"
	"zsh shell ä¸­çš„TRAPEXIT()å‡½æ•°çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ"
	"å®ƒæ˜¯åº•å±‚çš„å…¨å±€é’©å­ï¼Œå®šä¹‰äº†å‡½æ•°ç»“æŸæˆ–è€…è„šæœ¬ç»“æŸæ—¶éœ€è¦æ‰§è¡Œçš„åŠ¨ä½œã€‚">>