caption: #
created: 20250703000558161
description: zsh shell parameter flags ğŸ‘‰ # ä½¿ç”¨è¯´æ˜
modified: 20250703152330065
order: 2
progress: Completed
rating: Plain
tags: ParameterExpansionFlags PermanentNotes
title: ZshShellParameterExpansionFlags/#
type: text/vnd.tiddlywiki
visibility: Public

!! åŠŸèƒ½è§£é‡Šï¼š

è¿™ä¸ª `#` ''flag''çš„ä½œç”¨æ˜¯ï¼š

# ''æŠŠå‚æ•°å±•å¼€çš„ç»“æœå½“ä½œæ•°å­—è¡¨è¾¾å¼æ¥è®¡ç®—''ï¼ˆæ¯”å¦‚ `65`, `0x41`, `052` ç­‰ï¼‰ã€‚
# ''æŠŠæ•°å­—ç»“æœè§£é‡Šä¸ºå­—ç¬¦çš„ ASCII æˆ– Unicode ç¼–ç ''ï¼Œç„¶åè¾“å‡ºå¯¹åº”çš„å­—ç¬¦ã€‚

<<twks-alerter "note" "ç®€è€Œè¨€ä¹‹ï¼ŒæŠŠæ•°å­—è½¬æˆå­—ç¬¦ã€‚">>

<<twks-alerter "warning" """
	è¿™ä¸ª `#` flag å¿…é¡»ç”¨åœ¨ `${( # )...}` è¿™ç§å¸¦æ‹¬å·çš„å‚æ•°å±•å¼€ä¸­ï¼Œå’Œä¸å¸¦æ‹¬å·çš„ `#`ï¼ˆæ¯”å¦‚ `#foo`ï¼‰å®Œå…¨ä¸åŒã€‚""">>

å¦‚æœå¼€å¯äº† `MULTIBYTE` é€‰é¡¹ï¼Œæ•°å­— >127 ä¼šè¢«å½“ä½œ Unicode ç¼–ç ã€‚

!! å¸¸ç”¨çš„ä¾‹å­ï¼š

!!! ä¾‹1ï¼šæŠŠ ASCII ç è½¬å­—ç¬¦

å‡è®¾å˜é‡ `num` ä¸­å­˜å‚¨äº† `65`ï¼ˆASCII çš„ `A`ï¼‰

```zsh
num=65
print ${(#)num}

# è¾“å‡ºï¼š
A
```

!!! ä¾‹2ï¼šæŠŠåå…­è¿›åˆ¶è½¬å­—ç¬¦

åå…­è¿›åˆ¶ `0x41` ä¹Ÿæ˜¯ `A`

```zsh
num=0x41
print ${(#)num}
# è¾“å‡ºï¼š
A
```

!!! ä¾‹3ï¼šæŠŠå…«è¿›åˆ¶è½¬å­—ç¬¦

å…«è¿›åˆ¶ `0101`ï¼ˆä¹Ÿå°±æ˜¯åè¿›åˆ¶ `65`ï¼‰

```zsh
num=0101
print ${(#)num}
# è¾“å‡ºï¼š
A
```

!!! ä¾‹4ï¼šUnicode å­—ç¬¦

å‡è®¾ä½ æƒ³è¦ Unicode ç¼–ç  `9731` ï¼ˆé›ªäºº â˜ƒï¸ï¼‰

```zsh
num=9731
print ${(#)num}
# è¾“å‡ºï¼š
â˜ƒ
```

<<twks-alerter "warning" "åªæœ‰åœ¨ `setopt MULTIBYTE` æ—¶ï¼Œæ‰èƒ½è¾“å‡ºé«˜äº127çš„ Unicode å­—ç¬¦ã€‚">>

!! å°æŠ€å·§ï¼šä¸€è¡Œè¾“å‡ºå¤šä¸ªå­—ç¬¦

ä½ å¯ä»¥ç”¨ç©ºæ ¼åˆ†éš”å¤šä¸ªæ•°å­—ï¼š

```zsh
nums=(72 101 108 108 111)
print -n ${(#)nums}
```

''è¾“å‡ºï¼š''

```
Hello
```

ï¼ˆåˆ†åˆ«å¯¹åº” H e l l oï¼‰

!! æ€»ç»“ï¼š

* âœ… ''åŠŸèƒ½ï¼š''æŠŠæ•°å­—è½¬æˆå­—ç¬¦ï¼ˆASCII æˆ– Unicodeï¼‰ã€‚
* âœ… ''å¸¸ç”¨äºï¼š''
** ç¼–ç åˆ°å­—ç¬¦ (65 â†’ A)
** å¤„ç†åå…­è¿›åˆ¶å’Œå…«è¿›åˆ¶
** è¾“å‡º Unicode