authors: unknown
caption: zsh shell startup files
created: 20250219114549292
creator: uzvg
description: zsh shellå„ä¸ªå¯åŠ¨æ–‡ä»¶çš„ä½œç”¨
medium: Website
modified: 20260122061459774
modifier: uzvg
progress: Completed
rating: Valuable
tags: LiteratureNotes zsh Shell
title: zsh shell startup files(1739965549292)
type: text/vnd.tiddlywiki
url: https://zsh.sourceforge.io/Intro/intro_3.html
visibility: Public
year: 2025-02

| !File Name | !When Sourced | !Usage and Content | !Special Notes |
| `$ZDOTDIR/.zshenv` |On all invocations of the shell, unless the `-f` option is set |Contains commands to set the command search path and other important environment variables. Should not contain commands that produce output or assume the shell is attached to a tty. |If `ZDOTDIR` is not set, `HOME` value is used instead. |
| `$ZDOTDIR/.zprofile` |Sourced before `.zshrc` |Similar to `.zlogin`, meant as an alternative to `.zlogin` for ksh fans. Can be used to set up initial configurations before the interactive shell setup. |Not intended to be used together with `.zlogin` (though it can be done if desired), and it's sourced before the interactive shell related `.zshrc`. |
| `$ZDOTDIR/.zshrc` |In interactive shells |Contains commands to set up aliases, functions, options, key bindings, etc. |  |
| `$ZDOTDIR/.zlogin` |In login shells |Contains commands that should be executed only in login shells. Should be used to set the terminal type and run a series of external commands (like `fortune`, `msgs`, etc). Should not be used for alias definitions, options, environment variable settings. |  |
| `$ZDOTDIR/.zlogout` |When login shells exit |  |  |

æ ¹æ®è¯´æ˜ï¼Œä¸€äº›é‡è¦çš„ç¯å¢ƒå˜é‡å¦‚`path`ï¼Œ`fpath`ï¼Œ`XDG`å®šä¹‰çš„æ ‡å‡†è·¯å¾„ï¼Œåº”è¯¥åœ¨`.zshenv`æ–‡ä»¶ä¸­å®šä¹‰ã€‚

!! é…ç½®ç¯å¢ƒå˜é‡ï¼š

æ ¹æ®æ–‡æ¡£ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‰ä»¥ä¸‹æ–¹å¼ç»„ç»‡æˆ‘ä»¬çš„é…ç½®æ–‡ä»¶ï¼š

; 1. bootstrap `.zshenv` :

```
# $HOME/.zshenv
# vim: ft=zsh
# $HOME/.zshenv
# bootstrap .zshenv

export ZDOTDIR=$HOME/.config/zsh
```

* å®ƒçš„ä½œç”¨æ˜¯ï¼Œå®šä¹‰`ZDOTDIR`ç¯å¢ƒå˜é‡ï¼Œä½¿å…¶èƒ½æ‰¾åˆ°çœŸæ­£çš„`.zshenv`æ–‡ä»¶ã€‚

; 2. ç³»ç»Ÿçº§`.zshenv`ï¼š

```
# $ZDOTDIR/.zshenv
export PATH=$PATH:$HOME/.local/bin:$HOME/.cargo/bin
# export fpath=($ZDOTDIR $fpath)

# ================= ibus input method environment ================= #
# export INPUT_METHOD=wayland
export INPUT_METHOD=ibus
export GTK_IM_MODULE=ibus
export GLFW_IM_MODULE=ibus
export QT_IM_MODULE=ibus
export XMODIFIERS=@im=ibus
# export RIME_USER_PATH="$HOME/.config/ibus/rime";;

# ================= xdg-based environment value ================= #
# ğŸ”— https://wiki.archlinux.org/title/XDG_Base_Directory#User_directories
export XDG_CONFIG_HOME="$HOME/.config"
export XDG_CACHE_HOME="$HOME/.cache"
export XDG_DATA_HOME="$HOME/.local/share"
export XDG_STATE_HOME="$HOME/.local/state"
```

; 3. åº”ç”¨çº§ç¯å¢ƒå˜é‡å®šä¹‰æ–‡ä»¶ï¼š

```
$ZDOTDIR/env.zsh

# ä¸»è¦é’ˆå¯¹åº”ç”¨çš„ç¯å¢ƒè®¾ç½®ï¼Œç»å¸¸æ”¹å˜ï¼Œæ¯”å¦‚ï¼š
#--------------------------------------------
# mpd host socket configuration
export MPD_HOST="$XDG_RUNTIME_DIR/mpd/socket"
```