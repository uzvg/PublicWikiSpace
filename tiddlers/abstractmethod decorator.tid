cover: 20250530120430238.jpg
created: 20250607095005237
description: Python æŠ½è±¡åŸºç±» (`ABC`) ä¸ `@abstractmethod` æ­£ç¡®ç”¨æ³•æ€»ç»“
modified: 20260206133508222
modifier: uzvg
progress: Completed
rating: Plain
source: python function decorator
tags: PermanentNotes Python
title: abstractmethod decorator
type: text/vnd.tiddlywiki
visibility: Public

!! 1ï¸âƒ£ æ­£ç¡®å¯¼å…¥æŠ½è±¡åŸºç±»ç›¸å…³ç»„ä»¶

è¦ä½¿ç”¨æŠ½è±¡ç±»ç›¸å…³åŠŸèƒ½ï¼Œå¿…é¡»ä» Python çš„æ ‡å‡†æ¨¡å— `abc` ä¸­å¯¼å…¥ä¸¤ä¸ªå…³é”®å…ƒç´ ï¼š

```python
from abc import ABC, abstractmethod
```

* `ABC`ï¼šæŠ½è±¡åŸºç±»çš„åŸºç±»ï¼Œç”¨äºå¯ç”¨æŠ½è±¡æœºåˆ¶ï¼ˆç”± `ABCMeta` å…ƒç±»æ”¯æŒï¼‰
* `@abstractmethod`ï¼šç”¨äºå°†æ–¹æ³•æ ‡è®°ä¸ºâ€œæŠ½è±¡â€ï¼Œå³è¦æ±‚å­ç±»å¿…é¡»å®ç°

!! 2ï¸âƒ£ å£°æ˜æŠ½è±¡ç±»å¿…é¡»ç»§æ‰¿è‡ª `ABC`

è‹¥è¦å®šä¹‰ä¸€ä¸ªæŠ½è±¡åŸºç±»ï¼Œå¿…é¡»æ˜¾å¼ç»§æ‰¿ `ABC`ï¼Œå¦åˆ™å…¶ä¸­çš„æŠ½è±¡æ–¹æ³•ä¸ä¼šç”Ÿæ•ˆï¼š

```python
class Shape(ABC):
    @abstractmethod
    def area(self):
        pass
```

åªæœ‰ç»§æ‰¿è‡ª `ABC` çš„ç±»ï¼Œæ‰èƒ½è®© `@abstractmethod` èµ·åˆ°å¼ºåˆ¶å®ç°çš„æ•ˆæœã€‚

!! 3ï¸âƒ£ æœªç»§æ‰¿ `ABC` çš„ç±»ä¸­ä½¿ç”¨ `@abstractmethod` æ— æ•ˆ

å¦‚æœç±»æ²¡æœ‰ç»§æ‰¿è‡ª `ABC`ï¼Œå³ä½¿ä½¿ç”¨äº† `@abstractmethod` è£…é¥°å™¨ï¼Œä¹Ÿä¸ä¼šç”Ÿæ•ˆï¼š

```python
class Dummy:
    @abstractmethod  # âŒ æ— æ•ˆ
    def foo(self):
        pass
```

ä¸Šè¿°ä¾‹å­ä¸­ï¼Œ`foo()` ä¸ä¼šè¢«è§†ä¸ºæŠ½è±¡æ–¹æ³•ï¼Œå­ç±»ä¹Ÿä¸éœ€è¦å®ç°å®ƒï¼Œå³å¯è¢«å®ä¾‹åŒ–ã€‚

!! 4ï¸âƒ£ `@abstractmethod` ç”¨äºå®šä¹‰å¿…é¡»ç”±å­ç±»å®ç°çš„æ¥å£æ–¹æ³•

æŠ½è±¡æ–¹æ³•çš„æ ¸å¿ƒä½œç”¨æ˜¯ï¼šå®šä¹‰æ¥å£å¥‘çº¦ï¼Œå¼ºåˆ¶å­ç±»å®ç°è¿™äº›æ–¹æ³•ã€‚å®ƒä¸ä¼šæä¾›å®Œæ•´çš„åŠŸèƒ½å®ç°ï¼Œä½†å¯ä»¥æœ‰é»˜è®¤é€»è¾‘ï¼ˆè™½ç„¶é€šå¸¸åº”ä¿ç•™ä¸ºç©ºï¼‰ã€‚

```python
class Animal(ABC):
    @abstractmethod
    def speak(self):
        pass
```

æ­¤æ—¶ï¼Œä»»ä½•ç»§æ‰¿ `Animal` çš„ç±»ï¼Œè‹¥æœªå®ç° `speak()` æ–¹æ³•ï¼Œå°†æ— æ³•è¢«å®ä¾‹åŒ–ã€‚

!! 5ï¸âƒ£ æŠ½è±¡æ–¹æ³•çš„å®ç°è¦æ±‚æ˜¯â€œæœ€ç»ˆç±»â€å¿…é¡»å®ç°ï¼Œä¸æ˜¯â€œç›´æ¥å­ç±»â€

åªè¦æŸä¸ªç±»çš„ç»§æ‰¿é“¾ä¸­å­˜åœ¨æœªå®ç°çš„æŠ½è±¡æ–¹æ³•ï¼Œè¯¥ç±»ä»ç„¶æ˜¯æŠ½è±¡ç±»ï¼Œä¸èƒ½å®ä¾‹åŒ–ã€‚
åªæœ‰åœ¨æ•´ä¸ªç»§æ‰¿é“¾ä¸­ï¼Œæ‰€æœ‰æŠ½è±¡æ–¹æ³•éƒ½è¢«å®ç°åï¼Œæœ€åº•å±‚ç±»æ‰èƒ½è¢«å®ä¾‹åŒ–ã€‚

```python
class A(ABC):
    @abstractmethod
    def foo(self): pass

class B(A):  # ä»æ˜¯æŠ½è±¡ç±»
    pass

class C(B):
    def foo(self):
        print("implemented")  # âœ… å®Œæˆå®ç° â†’ å¯å®ä¾‹åŒ–

c = C()  # âœ… OK
b = B()  # âŒ TypeError: Can't instantiate abstract class
```

æ€»ç»“ï¼š

* â€œç›´æ¥å­ç±»â€ä¸ä¸€å®šå¿…é¡»å®ç°æŠ½è±¡æ–¹æ³•
* æœ€ç»ˆè¢«å®ä¾‹åŒ–çš„ç±»å¿…é¡»å®ç°æ‰€æœ‰æŠ½è±¡æ–¹æ³•

!! âœ… å¯é€‰è¡¥å……çŸ¥è¯†ç‚¹

!!! ğŸ”¹ æŠ½è±¡å±æ€§ä¸ç±»æ–¹æ³•

```python
class Person(ABC):
    @property
    @abstractmethod
    def name(self): pass

class Tool(ABC):
    @classmethod
    @abstractmethod
    def create(cls): pass
```

!!! ğŸ”¹ æ£€æŸ¥ç±»æ˜¯å¦ä»æ˜¯æŠ½è±¡ç±»

```python
print(SomeClass.__abstractmethods__)  # æŸ¥çœ‹æœªå®ç°çš„æŠ½è±¡æ–¹æ³•é›†åˆ
```
