created: 20250629100850877
description: gité¡¹ç›®åä½œè§„èŒƒæ–‡æ¡£è¯´æ˜
modified: 20250629192321374
progress: Completed
rating: Plain
tags: PermanentNotes Git GitWorkFlow
title: é¡¹ç›®åä½œè§„èŒƒæ–‡æ¡£
type: text/vnd.tiddlywiki
visibility: Public

!! ä¸€ã€åˆ†æ”¯ç®¡ç†ç­–ç•¥

æœ¬é¡¹ç›®é‡‡ç”¨ ''GitHub Flow å·¥ä½œæµ''ï¼Œä¸»å¼ ç®€å•ã€é«˜æ•ˆã€å¯æŒç»­é›†æˆã€‚

!!! 1.1 ä¸»åˆ†æ”¯ï¼ˆmainï¼‰

* `main` åˆ†æ”¯ä¸º''ç¨³å®šå‘å¸ƒåˆ†æ”¯''
* æ‰€æœ‰ä¸Šçº¿çš„ä»£ç éƒ½ä» Pull Request åˆå¹¶åˆ°æ­¤åˆ†æ”¯
* ç¦æ­¢ç›´æ¥å‘ `main` æ¨é€ä»£ç ï¼Œæ‰€æœ‰ä¿®æ”¹å¿…é¡»é€šè¿‡ PRï¼ˆPull Requestï¼‰

!!! 1.2 åŠŸèƒ½åˆ†æ”¯ï¼ˆFeature Branchï¼‰

æ¯ä½å¼€å‘è€…åœ¨æœ¬åœ°æˆ– GitHub ä¸Šä» `main` åˆ›å»ºåŠŸèƒ½åˆ†æ”¯å¼€å‘ã€‚

''å‘½åè§„èŒƒ''ï¼ˆç»Ÿä¸€ä½¿ç”¨å°å†™ã€çŸ­æ¨ªçº¿åˆ†éš”ï¼‰ï¼š

|tc-max-width|k
|!ç±»å‹|!å‘½åç¤ºä¾‹|!è¯´æ˜|
|åŠŸèƒ½ |`feature/login-page`      |æ–°åŠŸèƒ½å¼€å‘       |
|ä¿®å¤ |`bugfix/login-crash`      |ä¿®å¤æŸä¸ª bug    |
|é‡æ„ |`refactor/form-handler`   |ç»“æ„ä¼˜åŒ–ï¼Œä¸æ”¹è¡Œä¸ºé€»è¾‘ |
|æ–‡æ¡£ |`docs/api-usage`          |æ·»åŠ æˆ–ä¿®æ”¹æ–‡æ¡£     |
|å®éªŒ |`experiment/theme-switch` |éæ­£å¼è¯•éªŒæ€§åˆ†æ”¯    |

!! äºŒã€æäº¤è§„èŒƒï¼ˆCommit Messageï¼‰

é‡‡ç”¨ [[Conventional Commits|https://www.conventionalcommits.org/]] è§„èŒƒï¼š

```
<ç±»å‹>: <ç®€è¦æè¿°>

[å¯é€‰è¯¦ç»†è¯´æ˜]
```

!!! å¸¸è§ç±»å‹ï¼š

|!ç±»å‹|!å«ä¹‰|
|`feat`     |æ–°åŠŸèƒ½          |
|`fix`      |Bug ä¿®å¤       |
|`docs`     |ä»…æ–‡æ¡£æ›´æ”¹        |
|`refactor` |é‡æ„ï¼ˆä¸å½±å“åŠŸèƒ½ï¼‰    |
|`style`    |æ ¼å¼æ›´æ”¹ï¼ˆç©ºæ ¼ã€ç¼©è¿›ç­‰ï¼‰ |
|`test`     |æ·»åŠ æµ‹è¯•ä»£ç        |
|`chore`    |æ„å»ºã€ä¾èµ–ã€å·¥å…·ç­‰ä¿®æ”¹  |

''ç¤ºä¾‹ï¼š''

```bash
git commit -m "feat: add user registration logic"
git commit -m "fix: resolve crash on login page"
```

!! ä¸‰ã€Pull Request æµç¨‹

!!! 3.1 æäº¤ PR æ­¥éª¤

1. ä» `main` æ‹‰å–æœ€æ–°ä»£ç å¹¶åˆ›å»ºåˆ†æ”¯ï¼š

```bash
git checkout main
git pull origin main
git checkout -b feature/xxx
```

2. å¼€å‘å®Œæˆå push åˆ†æ”¯ï¼š

```bash
git push origin feature/xxx
```

3. åœ¨ GitHub ä¸Šå‘èµ· Pull Requestï¼ˆç›®æ ‡åˆ†æ”¯ä¸º `main`ï¼‰

4. æè¿°æœ¬æ¬¡æ”¹åŠ¨å†…å®¹ã€å…³è”çš„ issueã€æ˜¯å¦æœ‰ç ´åæ€§å˜æ›´ç­‰

5. è‡³å°‘ 1 äºº code review é€šè¿‡åå†åˆå¹¶

!!! 3.2 åˆå¹¶è§„èŒƒ

* ä½¿ç”¨ ''Squash & Merge'' åˆå¹¶æ–¹å¼ï¼Œä¿æŒæäº¤å†å²æ•´æ´
* åˆå¹¶åè‡ªåŠ¨åˆ é™¤æºåˆ†æ”¯ï¼ˆé€‰é¡¹å¯åœ¨ GitHub PR è®¾ç½®ä¸­å‹¾é€‰ï¼‰
* ä¸»åˆ†æ”¯åº”å§‹ç»ˆä¿æŒå¯è¿è¡Œã€å¯éƒ¨ç½²çŠ¶æ€

!! å››ã€åˆ†æ”¯ä¿æŠ¤è§„åˆ™ï¼ˆæ¨èåœ¨ GitHub é¡¹ç›®ä¸­è®¾ç½®ï¼‰

* âŒ ç¦æ­¢ç›´æ¥ push åˆ° `main` åˆ†æ”¯
* âœ… æ‰€æœ‰åˆå¹¶å¿…é¡»é€šè¿‡ Pull Request
* âœ… PR åˆå¹¶å‰å¿…é¡»ï¼š
** è‡³å°‘é€šè¿‡ 1 æ¬¡ä»£ç å®¡æŸ¥
** é€šè¿‡ CI æ£€æŸ¥ï¼ˆè‡ªåŠ¨æµ‹è¯•ã€lint ç­‰ï¼‰

!! äº”ã€æŒç»­é›†æˆï¼ˆCIï¼‰å»ºè®®ï¼ˆGitHub Actionsï¼‰

!!! 5.1 æ¨èä»»åŠ¡ï¼š

* æ ¼å¼æ£€æŸ¥ï¼ˆå¦‚ eslintã€prettierï¼‰
* å•å…ƒæµ‹è¯•ï¼ˆjestã€pytest ç­‰ï¼‰
* æ„å»ºæµç¨‹éªŒè¯ï¼ˆæ˜¯å¦èƒ½æ­£å¸¸æ„å»ºï¼‰
* è‡ªåŠ¨éƒ¨ç½²ï¼ˆå¯é€‰ï¼‰

> å¯åœ¨ `.github/workflows/` ç›®å½•ä¸­é…ç½®ç›¸åº” YAML æ–‡ä»¶

!! å…­ã€åä½œå»ºè®®

* æ¯äººåˆ†æ”¯æœ€å¤šä¿æŒ 2 ä¸ªå¹¶è¡Œå¼€å‘ä»»åŠ¡ï¼Œé¿å…é—å¿˜ä¸å†²çª
* PR ä¼˜å…ˆè§£å†³ bugï¼Œå…¶æ¬¡æ˜¯åŠŸèƒ½ä¸é‡æ„
* å°½å¯èƒ½å°æ­¥æäº¤ï¼ˆæ¯ä¸ªæäº¤æœ‰æ„ä¹‰ï¼‰ï¼Œé¿å…ä¸€æ¬¡æäº¤æ”¹ä¸€å †ä¸œè¥¿
* å»ºè®®æ¯å‘¨è‡³å°‘åŒæ­¥ä¸€æ¬¡ `main` åˆ†æ”¯çš„å˜æ›´

!! ä¸ƒã€FAQï¼ˆå¸¸è§é—®é¢˜ï¼‰

!!! 1. ä¸Šæ¸¸é¡¹ç›®æ›´æ–°äº†ï¼Œæˆ‘çš„åˆ†æ”¯æ€ä¹ˆåŠï¼Ÿ

```bash
git checkout main
git pull origin main
git checkout feature/xxx
git rebase main
```

!!! 2. åˆå¹¶å†²çªæ€ä¹ˆåŠï¼Ÿ

æ‰‹åŠ¨è§£å†³å†²çªåï¼Œä½¿ç”¨ï¼š

```bash
git add .
git rebase --continue   # å¦‚æœæ˜¯ rebase
# æˆ– git commit          # å¦‚æœæ˜¯ merge
```

!! é™„ï¼šå»ºè®®å·¥å…·

* Git GUI å·¥å…·ï¼šGitHub Desktop / GitKraken / Sourcetree
* CLI åŠ©æ‰‹ï¼š`tig`ã€`lazygit`ã€`gh`ï¼ˆGitHub CLIï¼‰
* æäº¤æ ¡éªŒï¼š`commitlint` + `husky`

å¦‚ä½ æ„¿æ„ï¼Œæˆ‘ä¹Ÿå¯ä»¥å¸®ä½ ç›´æ¥ç”Ÿæˆä¸€ä»½ `README.development.md` æˆ– `CONTRIBUTING.md` æ–‡ä»¶ï¼Œé€‚åˆç›´æ¥æ”¾å…¥ä½ çš„å¼€æºé¡¹ç›®ä»“åº“ä¸­ã€‚éœ€è¦çš„è¯åªéœ€å‘Šè¯‰æˆ‘ ğŸ’¬